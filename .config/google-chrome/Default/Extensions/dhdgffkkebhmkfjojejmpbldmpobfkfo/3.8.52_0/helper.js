Registry.require("convert",function(){var t=Registry.get("convert"),q=function(a,c){void 0==c&&(c=[]);var b=RegExp("(\\"+"/.+?|()[]{}\\".split("").concat(c).join("|\\")+")","g");return a.replace(b,"\\$1")},m=function(a,c){return q(a,["*"])},h=function(a){return{}.toString.apply(a).match(/\s([a-z|A-Z]+)/)[1]},f=function(a,c){var b=h(a);if("Array"===b||"NodeList"===b)for(b=0;b<a.length&&!1!==c(a[b],b);b++);else if("XPathResult"===b)for(b=a.iterateNext();b&&!1!==c(b);)b=a.iterateNext();else for(var d in a)if(a.hasOwnProperty(d)&&
!1===c(a[d],d))break},n=function(a,c,b,d){if("Array"===h(b)){var e={};b.forEach(function(a){e[a]=!0});b=e}f(b||a,function(e,g){if(!b||b.hasOwnProperty(g)){var f,k=a[g],l=h(k);"Undefined"==l||b&&d&&(f=h(b[g]))&&f!==l&&("Array"===f||"Object"===f)||("Object"==l?(c[g]={},n(k,c[g],b?b[g]:null)):"Array"==l?(c[g]=[],n(k,c[g])):c[g]=k)}})},p=function(a){if("Object"==h(a)){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b+":"+p(a[b]));return"{"+c.join(",")+"}"}if("Array"==h(a)){var d=[];a.forEach(function(a){d.push(p(a))});
return"["+d.join(",")+"]"}return void 0===a?"undefined":null===a?"null":"Function"==h(a)?a.toString():'"'+a.toString()+'"'},r=function(a){return document.body?document.body.innerText:0<a.childNodes.length?r(a.childNodes[a.childNodes.length-1]):a.innerText},u=function(){var a={objs:{},push:function(c,b){0!==b&&1!==b&&(b=0);var d=s();a.objs[d]={fn:c,prio:b};return d},remove:function(c){delete a.objs[c]},get:function(c){for(var b=[],d=0;1>=d;d++)for(var e in a.objs)a.objs.hasOwnProperty(e)&&(a.objs[e].prio!==
d||void 0!==c&&e!=c||b.push(a.objs[e].fn));return void 0===c?b:b[0]},finalize:function(c){if(void 0===c){c=a.get();for(var b=0;b<c.length;b++)c[b]()}else return a.objs[c]&&(b=a.objs[c].fn(),delete a.objs[c]),b}};return a}(),s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)})};Registry.register("helper","52",{createUniqueId:function(a,c){return t.Base64.encode(a+"_"+c).replace(/[^0-9a-zA-Z_\-]/g,
"")},getStringBetweenTags:function(a,c,b){var d=a.search(m(c));if(-1==d)return"";if(!b)return a.substr(d+c.length);b=a.substr(d+c.length).search(m(b));return-1==b?"":a.substr(d+c.length,b)},escapeForRegExpURL:q,escapeForRegExp:m,isLocalImage:function(a){var c=chrome.extension.getURL("background.js"),c=c.replace("background.js","")+"images/";return a.length>=c.length&&c==a.substr(0,c.length)},getUrlArgs:function(a){var c={},b=window.location.search.replace(/^\?/,""),d=window.location.hash.replace(/^#/,
"");b?a&&d&&(b=b+"&"+d):b=d;a=b.split("&");for(var e,b=0;b<a.length;b++)e=a[b].split("="),2!=e.length&&(d=e[0],e=e.slice(1).join("="),e=[d,e]),c[e[0]]=decodeURIComponent(e[1]);return c},getSource:r,alert:function(a){window.setTimeout(function(){alert(a)},1)},confirm:function(a,c){window.setTimeout(function(){var b=confirm(a);c(b)},1)},serialize:p,filter:function(a,c){return a&&c?(a.match(c)||[]).join(""):""},toType:h,each:f,select:function(a,c){var b=[];f(a,function(a){c(a)&&b.push(a)});return b},
map:function(a,c){var b=[];f(a,function(a){b.push(c(a))});return b},clean:u,sleep:function(a){for(var c=(new Date).getTime();(new Date).getTime()-c<a;)for(var b=0;100>b;b++);},copy:n,getDebouncer:function(a){return function(){var c={},b=a||1E3,d={is:function(a){return!!c[a]},add:function(a){d.is(a)&&window.clearTimeout(c[a]);c[a]=window.setTimeout(function(){delete c[a]},b)}};return d}()},createUUID:s,decodeHtml:function(a){return a.replace(/(?:&#x([a-fA-F0-9]+);|&#([0-9]+);)/g,function(a,b,d){return b?
String.fromCharCode(parseInt(b,16)):String.fromCharCode(parseInt(d,10))})},encodeHtml:function(a){return a.replace(/[\u00A0-\u2666]/g,function(a){return"&#"+a.charCodeAt(0)+";"})},staticVars:{visible:void 0,invisible:"display: none;",visible_move:void 0,invisible_move:"position:absolute; left: -20000px; top: -200000px; width: 1px; height: 1px;"}})});
