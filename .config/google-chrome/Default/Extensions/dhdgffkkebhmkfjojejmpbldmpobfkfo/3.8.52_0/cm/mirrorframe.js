function MirrorFrame(a,d,c,b,g){function h(a,b,d){void 0===d&&(d=!0);var c=document.createElement("input");c.type="button";c.value=a;f.home.appendChild(c);a=function(){f[b].call(f)};c.onclick=a;d&&(k[b]=a)}this.edit=document.createElement("div");this.home=document.createElement("div");this.home.setAttribute("class","CodeMirror-menu");this.edit.setAttribute("class","CodeMirror-editor");a.appendChild&&a.insertBefore&&a.firstChild?(a.insertBefore(this.home,a.firstChild),a.appendChild(this.edit)):a.appendChild?
(a.appendChild(this.home),a.appendChild(this.edit)):a(this.home);var f=this,k={};d.noButtons||(h(g.search,"search",!1),h(g.replace,"replace"),h(g.jump,"jump"),h(g.macro,"macro"),h(g.reindentall,"reindentall"));this.mirror=new CodeMirror(this.edit,d);for(var e in k)this.mirror.setCommand(e,k[e]);if(c)for(e in c)this.mirror.setCommand(e,c[e]);if(b)for(e in b)this.mirror.on(e,b[e]);f.refresh=function(){f.mirror.refresh.call(f.mirror)}}
MirrorFrame.prototype={toTextArea:function(){},search:function(a,d){var c,b;if(void 0==a&&(a=prompt("Enter search term:",""),!a))return;b=this.mirror.getSearchCursor(a,this.mirror.getCursor());do c=!1,d?b.findPrevious()?this.mirror.setSelection(b.pos.from,b.pos.to):(c=confirm("Start of document reached. Start over?"))&&(b=this.mirror.getSearchCursor(a,{line:this.mirror.lastLine()})):b.findNext()?this.mirror.setSelection(b.pos.from,b.pos.to):(c=confirm("End of document reached. Start over?"))&&(b=
this.mirror.getSearchCursor(a));while(c);return a},replace:function(){var a=prompt("Enter search string:",""),d;a&&(d=prompt("What should it be replaced with?",""));if(null!=d)for(a=this.mirror.getSearchCursor(a,!1);a.findNext();)a.replace(d)},jump:function(){var a=prompt("Jump to line:","");a&&!isNaN(Number(a-1))&&this.mirror.setCursor(Number(a-1));this.mirror.focus()},line:function(){alert("The cursor is currently at line "+this.mirror.currentLine());this.mirror.focus()},macro:function(){var a=
prompt("Name your constructor:","");a&&this.mirror.replaceSelection("function "+a+"() {\n  \n}\n\n"+a+".prototype = {\n  \n};\n")},reindentall:function(){for(var a=0;a<=this.mirror.lineCount();a++)this.mirror.indentLine(a,"smart")}};
